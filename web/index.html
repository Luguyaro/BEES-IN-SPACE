<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bees in Space: Plataforma Ap√≠cola</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        /* Estilos Base y Tipograf√≠a */
        body, html { margin: 0; padding: 0; height: 100%; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f0f2f5; }
        
        /* Contenedor Principal de la Plataforma */
        #main-container { display: none; height: 100%; }
        #map-container { flex-grow: 1; height: 100%; }
        #controls-panel { width: 380px; padding: 25px; background-color: #ffffff; box-shadow: 2px 0 15px rgba(0,0,0,0.1); overflow-y: auto; }
        
        /* Estilos de Widgets (Para un mejor contraste y estructura) */
        .widget { margin-bottom: 25px; padding: 18px; border-radius: 10px; background-color: #f9f9f9; border-left: 5px solid #ffc300; }
        .widget h4 { margin-top: 0; color: #333; }
        
        /* Landing Page: Animaci√≥n de Patr√≥n Hexagonal (Fondo) */
        .landing-page { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #0f1626; color: white; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 1000; transition: opacity 0.5s ease-out; }
        .jwst-grid { position: absolute; width: 100%; height: 100%; overflow: hidden; opacity: 0.15; }
        .hex-unit { width: 50px; height: 50px; background-color: #ffc300; clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%); margin: 5px; float: left; animation: pulse 3s infinite alternate; }
        
        /* Animaci√≥n sutil de los hex√°gonos en el fondo */
        @keyframes pulse { 0% { opacity: 0.1; transform: scale(0.9); } 100% { opacity: 0.3; transform: scale(1.1); } }
        
        /* Estilo para los botones */
        button { padding: 10px 15px; background-color: #ffc300; color: #111; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; transition: background-color 0.2s; }
        button:hover { background-color: #e6b200; }
        
        /* Leyenda de Riesgo */
        .legend-item { display: flex; align-items: center; margin-bottom: 8px; font-size: 0.9em; }
        .risk-color-box { width: 18px; height: 18px; display: inline-block; border-radius: 3px; margin-right: 10px; }
    </style>
</head>
<body>

    <div id="landing-page" class="landing-page">
        <div class="jwst-grid">
            <script>
                // Generar un patr√≥n hexagonal simple para el fondo
                const grid = document.querySelector('.jwst-grid');
                for (let i = 0; i < 200; i++) {
                    const hex = document.createElement('div');
                    hex.className = 'hex-unit';
                    hex.style.animationDelay = `${Math.random() * 5}s`;
                    grid.appendChild(hex);
                }
            </script>
        </div>

        <div style="max-width: 600px; text-align: center; z-index: 10; padding: 20px;">
            <h1 style="color: #ffc300; font-size: 2.5em;">üêù Bees in Space üõ∞Ô∏è</h1>
            <p style="font-size: 1.2em; line-height: 1.6;">
                **Misi√≥n:** Utilizamos datos satelitales de la NASA para proteger a los polinizadores en Latinoam√©rica. Nuestra plataforma identifica microzonas cr√≠ticas afectadas por el cambio clim√°tico, la tala y la miner√≠a.
            </p>
            <p>
                **Alcance:** Alertar a agricultores y entidades gubernamentales con datos verificables para promover la reforestaci√≥n, el uso sostenible del suelo y la conservaci√≥n efectiva de la biodiversidad.
            </p>
            <button onclick="enterPlatform()">
                Entrar a la Plataforma de Monitoreo
            </button>
        </div>
    </div>

    <div id="main-container">
        
        <div id="controls-panel">
            <h2 style="border-bottom: 2px solid #eee; padding-bottom: 10px;">An√°lisis Ap√≠cola Hexagonal</h2>

            <div class="widget">
                <h4>1. √çndice de Riesgo Unificado (IA)</h4>
                <p>Muestra el nivel de amenaza integrado (Clima + Floraci√≥n + H√°bitat).</p>
                <div class="legend-item"><span class="risk-color-box" style="background-color: #28a745;"></span> **Verde:** Seguro (Saludable)</div>
                <div class="legend-item"><span class="risk-color-box" style="background-color: #ffc107;"></span> **Amarillo:** Alerta (Monitorear estr√©s)</div>
                <div class="legend-item"><span class="risk-color-box" style="background-color: #dc3545;"></span> **Rojo:** Cr√≠tico (Acci√≥n inmediata/P√©rdida de h√°bitat)</div>
                
                <button onclick="loadRiskMap('unified')">Visualizar Riesgo</button>
            </div>

            <div class="widget">
                <h4>2. An√°lisis por Variable (Modo Experto)</h4>
                <p>Visualiza el impacto de una sola variable satelital (datos en crudo).</p>
                <label><input type="radio" name="layer" value="NDVI" onclick="loadRiskMap('NDVI')"> **Floraci√≥n (NDVI)**</label><br>
                <label><input type="radio" name="layer" value="LST" onclick="loadRiskMap('LST')"> **Estr√©s T√©rmico (LST)**</label><br>
                <label><input type="radio" name="layer" value="LAND_CHANGE" onclick="loadRiskMap('LAND_CHANGE')"> **P√©rdida de H√°bitat**</label>
            </div>
            
            <div class="widget">
                <h4>3. Acci√≥n Local y Validaci√≥n</h4>
                <p id="action-text">Haga clic en un hex√°gono para ver recomendaciones de acci√≥n inmediata.</p>
                <button onclick="downloadRawData()" style="background-color: #007bff; margin-top: 10px;">
                    Descargar Datos Crudos (CSV/Expertos)
                </button>
            </div>
        </div>
        
        <div id="map-container">
            <div id="map" style="height: 100%;"></div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://unpkg.com/h3-js@3.7.2/dist/h3-js.umd.js"></script>
    <script src="platform.js"></script>
</body>
</html>